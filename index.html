<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Finny — Доходы и Расходы</title>

  <meta name="theme-color" content="#0b0f1a" />
  <link rel="stylesheet" href="./styles.css" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>
  <div class="bg-orb orb-1"></div>
  <div class="bg-orb orb-2"></div>
  <div class="bg-orb orb-3"></div>

  <main class="app">
    <header class="topbar">
      <div class="brand">
        <div class="logo">₿</div>
        <div class="titles">
          <div class="name">Finny</div>
          <div class="sub">доходы • расходы • баланс</div>
        </div>
      </div>

      <button class="icon-btn" id="btnSettings" aria-label="Настройки">
        <svg viewBox="0 0 24 24" class="icon"><path d="M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.3 7.3 0 0 0-1.63-.94l-.36-2.54A.5.5 0 0 0 13.9 1h-3.8a.5.5 0 0 0-.49.42l-.36 2.54c-.58.23-1.12.54-1.63.94l-2.39-.96a.5.5 0 0 0-.6.22L2.7 7.48a.5.5 0 0 0 .12.64l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94L2.82 14.52a.5.5 0 0 0-.12.64l1.92 3.32c.13.22.39.31.6.22l2.39-.96c.5.4 1.05.71 1.63.94l.36 2.54c.04.24.25.42.49.42h3.8c.24 0 .45-.18.49-.42l.36-2.54c.58-.23 1.12-.54 1.63-.94l2.39.96c.22.09.47 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58ZM12 15.5A3.5 3.5 0 1 1 12 8a3.5 3.5 0 0 1 0 7.5Z"/></svg>
      </button>
    </header>

    <section class="hero">
      <div class="balance-card">
        <div class="balance-row">
          <div class="k">Баланс</div>
          <div class="v" id="balanceValue">0 ₽</div>
        </div>

        <div class="split">
          <div class="pill income">
            <div class="k">Доход</div>
            <div class="v" id="incomeValue">0 ₽</div>
          </div>
          <div class="pill expense">
            <div class="k">Расход</div>
            <div class="v" id="expenseValue">0 ₽</div>
          </div>
        </div>

        <div class="hint" id="tgHint">Открой в Telegram, чтобы был нативный вид ✨</div>
      </div>

      <div class="quick">
        <button class="primary" id="btnAdd"><span>＋</span> Добавить</button>

        <div class="segmented" role="tablist" aria-label="Фильтр">
          <button class="seg-btn active" data-filter="all">Все</button>
          <button class="seg-btn" data-filter="income">Доход</button>
          <button class="seg-btn" data-filter="expense">Расход</button>
        </div>
      </div>

      <div class="search">
        <input id="searchInput" type="search" placeholder="Поиск по заметке или категории…" />
      </div>
    </section>

    <section class="list">
      <div class="list-head">
        <div class="title">Операции</div>
        <div class="actions">
          <button class="ghost" id="btnExport">Экспорт</button>
          <label class="ghost file">
            Импорт
            <input type="file" id="importFile" accept="application/json" hidden />
          </label>
          <button class="danger" id="btnClear">Очистить</button>
        </div>
      </div>

      <div id="items" class="items"></div>

      <div class="empty" id="emptyState">
        <div class="spark">✦</div>
        <div class="t">Пока пусто</div>
        <div class="s">Добавь первую операцию — и увидишь статистику.</div>
      </div>
    </section>

    <!-- ===== ADD / EDIT OVERLAY ===== -->
    <div class="overlay" id="overlayAdd" hidden>
      <div class="sheet" role="dialog" aria-modal="true" aria-label="Добавить операцию">
        <div class="sheet-top">
          <div class="sheet-title" id="sheetTitle">Новая операция</div>
          <button class="icon-btn" id="btnCloseAdd" aria-label="Закрыть">
            <svg viewBox="0 0 24 24" class="icon"><path d="M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.59 13.4 4.29 19.71 2.88 18.3 9.17 12 2.88 5.71 4.29 4.29l6.3 6.3 6.29-6.3z"/></svg>
          </button>
        </div>

        <div class="form">
          <div class="row">
            <label class="field">
              <span>Тип</span>
              <div class="type-toggle">
                <button class="type-btn active" data-type="expense">Расход</button>
                <button class="type-btn" data-type="income">Доход</button>
              </div>
            </label>
          </div>

          <div class="row two">
            <label class="field">
              <span>Сумма</span>
              <input id="amountInput" inputmode="decimal" placeholder="например 1990" />
            </label>
            <label class="field">
              <span>Валюта</span>
              <select id="currencySelect">
                <option value="RUB">₽ RUB</option>
                <option value="EUR">€ EUR</option>
                <option value="USD">$ USD</option>
              </select>
            </label>
          </div>

          <div class="row two">
            <label class="field">
              <span>Категория</span>
              <select id="categorySelect">
                <option>Еда</option>
                <option>Транспорт</option>
                <option>Дом</option>
                <option>Подписки</option>
                <option>Развлечения</option>
                <option>Здоровье</option>
                <option>Подарки</option>
                <option>Другое</option>
              </select>
            </label>
            <label class="field">
              <span>Дата</span>
              <input id="dateInput" type="date" />
            </label>
          </div>

          <label class="field">
            <span>Заметка</span>
            <input id="noteInput" placeholder="например: кофе + круассан" />
          </label>

          <div class="row end">
            <button class="secondary" id="btnCancelAdd">Отмена</button>
            <button class="primary" id="btnSave">Сохранить</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== SETTINGS OVERLAY ===== -->
    <div class="overlay" id="overlaySettings" hidden>
      <div class="sheet" role="dialog" aria-modal="true" aria-label="Настройки">
        <div class="sheet-top">
          <div class="sheet-title">Настройки</div>
          <button class="icon-btn" id="btnCloseSettings" aria-label="Закрыть">
            <svg viewBox="0 0 24 24" class="icon"><path d="M18.3 5.71 12 12l6.3 6.29-1.41 1.42L10.59 13.4 4.29 19.71 2.88 18.3 9.17 12 2.88 5.71 4.29 4.29l6.3 6.3 6.29-6.3z"/></svg>
          </button>
        </div>

        <div class="form">
          <label class="field">
            <span>Тема</span>
            <div class="type-toggle">
              <button class="type-btn active" data-theme="dark">Тёмная</button>
              <button class="type-btn" data-theme="light">Светлая</button>
            </div>
          </label>

          <label class="field">
            <span>Формат даты</span>
            <select id="dateFormatSelect">
              <option value="ru">ДД.ММ.ГГГГ</option>
              <option value="iso">ГГГГ-ММ-ДД</option>
            </select>
          </label>

          <div class="row end">
            <button class="primary" id="btnSettingsDone">Готово</button>
          </div>

          <div class="footer-note">
            Данные хранятся только на твоём устройстве (localStorage).
          </div>
        </div>
      </div>
    </div>

  </main>

  <script src="./app.js"></script>
</body>
</html>
